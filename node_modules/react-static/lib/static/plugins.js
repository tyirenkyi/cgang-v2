"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.validatePlugin = void 0;

var _utils = require("../utils");

var supportedHooks = ['afterGetConfig', 'beforePrepareBrowserPlugins', 'afterPrepareBrowserPlugins', 'beforePrepareRoutes', 'getRoutes', 'normalizeRoute', 'afterPrepareRoutes', 'webpack', 'afterBundle', 'afterDevServerStart', 'beforeRenderToElement', 'beforeRenderToHtml', 'htmlProps', 'headElements', 'beforeHtmlToDocument', 'beforeDocumentToFile', 'afterExport', 'plugins'];

var validatePlugin = function validatePlugin(plugin) {
  var hookKeys = Object.keys(plugin.hooks);
  var badKeys = hookKeys.filter(function (key) {
    return !supportedHooks.includes(key);
  });

  if (badKeys.length) {
    throw new Error("Unknown plugin hooks: \"".concat(badKeys.join(', '), "\" found in plugin: ").concat(plugin.location));
  }
};

exports.validatePlugin = validatePlugin;
var _default = {
  afterGetConfig: function afterGetConfig(state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'afterGetConfig');
    return (0, _utils.reduceHooks)(hooks, {
      sync: true
    })(state);
  },
  beforePrepareBrowserPlugins: function beforePrepareBrowserPlugins(state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'beforePrepareBrowserPlugins');
    return (0, _utils.reduceHooks)(hooks)(state);
  },
  afterPrepareBrowserPlugins: function afterPrepareBrowserPlugins(state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'afterPrepareBrowserPlugins');
    return (0, _utils.reduceHooks)(hooks)(state);
  },
  beforePrepareRoutes: function beforePrepareRoutes(state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'beforePrepareRoutes');
    return (0, _utils.reduceHooks)(hooks)(state);
  },
  getRoutes: function getRoutes(routes, state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'getRoutes');
    return (0, _utils.reduceHooks)(hooks)(routes, state);
  },
  normalizeRoute: function normalizeRoute(state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'normalizeRoute');
    return function (route) {
      return (0, _utils.reduceHooks)(hooks, {
        sync: true
      })(route, state);
    };
  },
  afterPrepareRoutes: function afterPrepareRoutes(state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'afterPrepareRoutes');
    return (0, _utils.reduceHooks)(hooks)(state);
  },
  webpack: function webpack(config, state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'webpack');
    return (0, _utils.reduceHooks)(hooks, {
      sync: true
    })(config, state);
  },
  afterBundle: function afterBundle(state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'afterBundle');
    return (0, _utils.reduceHooks)(hooks)(state);
  },
  afterDevServerStart: function afterDevServerStart(state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'afterDevServerStart');
    return (0, _utils.reduceHooks)(hooks)(state);
  },
  beforeRenderToElement: function beforeRenderToElement(Comp, state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'beforeRenderToElement');
    return (0, _utils.reduceHooks)(hooks)(Comp, state);
  },
  beforeRenderToHtml: function beforeRenderToHtml(element, state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'beforeRenderToHtml');
    return (0, _utils.reduceHooks)(hooks)(element, state);
  },
  htmlProps: function htmlProps(props, state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'htmlProps');
    return (0, _utils.reduceHooks)(hooks)(props, state);
  },
  headElements: function headElements(elements, state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'headElements');
    return (0, _utils.reduceHooks)(hooks)(elements, state);
  },
  beforeHtmlToDocument: function beforeHtmlToDocument(html, state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'beforeHtmlToDocument');
    return (0, _utils.reduceHooks)(hooks)(html, state);
  },
  beforeDocumentToFile: function beforeDocumentToFile(html, state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'beforeDocumentToFile');
    return (0, _utils.reduceHooks)(hooks)(html, state);
  },
  afterExport: function afterExport(state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'afterExport');
    return (0, _utils.reduceHooks)(hooks)(state);
  },
  plugins: function plugins(state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'plugins');
    return (0, _utils.reduceHooks)(hooks)(state);
  }
};
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zdGF0aWMvcGx1Z2lucy5qcyJdLCJuYW1lcyI6WyJzdXBwb3J0ZWRIb29rcyIsInZhbGlkYXRlUGx1Z2luIiwicGx1Z2luIiwiaG9va0tleXMiLCJPYmplY3QiLCJrZXlzIiwiaG9va3MiLCJiYWRLZXlzIiwiZmlsdGVyIiwia2V5IiwiaW5jbHVkZXMiLCJsZW5ndGgiLCJFcnJvciIsImpvaW4iLCJsb2NhdGlvbiIsImFmdGVyR2V0Q29uZmlnIiwic3RhdGUiLCJwbHVnaW5zIiwic3luYyIsImJlZm9yZVByZXBhcmVCcm93c2VyUGx1Z2lucyIsImFmdGVyUHJlcGFyZUJyb3dzZXJQbHVnaW5zIiwiYmVmb3JlUHJlcGFyZVJvdXRlcyIsImdldFJvdXRlcyIsInJvdXRlcyIsIm5vcm1hbGl6ZVJvdXRlIiwicm91dGUiLCJhZnRlclByZXBhcmVSb3V0ZXMiLCJ3ZWJwYWNrIiwiY29uZmlnIiwiYWZ0ZXJCdW5kbGUiLCJhZnRlckRldlNlcnZlclN0YXJ0IiwiYmVmb3JlUmVuZGVyVG9FbGVtZW50IiwiQ29tcCIsImJlZm9yZVJlbmRlclRvSHRtbCIsImVsZW1lbnQiLCJodG1sUHJvcHMiLCJwcm9wcyIsImhlYWRFbGVtZW50cyIsImVsZW1lbnRzIiwiYmVmb3JlSHRtbFRvRG9jdW1lbnQiLCJodG1sIiwiYmVmb3JlRG9jdW1lbnRUb0ZpbGUiLCJhZnRlckV4cG9ydCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUVBLElBQU1BLGNBQWMsR0FBRyxDQUNyQixnQkFEcUIsRUFFckIsNkJBRnFCLEVBR3JCLDRCQUhxQixFQUlyQixxQkFKcUIsRUFLckIsV0FMcUIsRUFNckIsZ0JBTnFCLEVBT3JCLG9CQVBxQixFQVFyQixTQVJxQixFQVNyQixhQVRxQixFQVVyQixxQkFWcUIsRUFXckIsdUJBWHFCLEVBWXJCLG9CQVpxQixFQWFyQixXQWJxQixFQWNyQixjQWRxQixFQWVyQixzQkFmcUIsRUFnQnJCLHNCQWhCcUIsRUFpQnJCLGFBakJxQixF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eyBnZXRIb29rcywgcmVkdWNlSG9va3MgfSBmcm9tICcuLi91dGlscydcclxuXHJcbmNvbnN0IHN1cHBvcnRlZEhvb2tzID0gW1xyXG4gICdhZnRlckdldENvbmZpZycsXHJcbiAgJ2JlZm9yZVByZXBhcmVCcm93c2VyUGx1Z2lucycsXHJcbiAgJ2FmdGVyUHJlcGFyZUJyb3dzZXJQbHVnaW5zJyxcclxuICAnYmVmb3JlUHJlcGFyZVJvdXRlcycsXHJcbiAgJ2dldFJvdXRlcycsXHJcbiAgJ25vcm1hbGl6ZVJvdXRlJyxcclxuICAnYWZ0ZXJQcmVwYXJlUm91dGVzJyxcclxuICAnd2VicGFjaycsXHJcbiAgJ2FmdGVyQnVuZGxlJyxcclxuICAnYWZ0ZXJEZXZTZXJ2ZXJTdGFydCcsXHJcbiAgJ2JlZm9yZVJlbmRlclRvRWxlbWVudCcsXHJcbiAgJ2JlZm9yZVJlbmRlclRvSHRtbCcsXHJcbiAgJ2h0bWxQcm9wcycsXHJcbiAgJ2hlYWRFbGVtZW50cycsXHJcbiAgJ2JlZm9yZUh0bWxUb0RvY3VtZW50JyxcclxuICAnYmVmb3JlRG9jdW1lbnRUb0ZpbGUnLFxyXG4gICdhZnRlckV4cG9ydCcsXHJcbiAgJ3BsdWdpbnMnLFxyXG5dXHJcblxyXG5leHBvcnQgY29uc3QgdmFsaWRhdGVQbHVnaW4gPSBwbHVnaW4gPT4ge1xyXG4gIGNvbnN0IGhvb2tLZXlzID0gT2JqZWN0LmtleXMocGx1Z2luLmhvb2tzKVxyXG4gIGNvbnN0IGJhZEtleXMgPSBob29rS2V5cy5maWx0ZXIoa2V5ID0+ICFzdXBwb3J0ZWRIb29rcy5pbmNsdWRlcyhrZXkpKVxyXG4gIGlmIChiYWRLZXlzLmxlbmd0aCkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICBgVW5rbm93biBwbHVnaW4gaG9va3M6IFwiJHtiYWRLZXlzLmpvaW4oJywgJyl9XCIgZm91bmQgaW4gcGx1Z2luOiAke1xyXG4gICAgICAgIHBsdWdpbi5sb2NhdGlvblxyXG4gICAgICB9YFxyXG4gICAgKVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gIGFmdGVyR2V0Q29uZmlnOiBzdGF0ZSA9PiB7XHJcbiAgICBjb25zdCBob29rcyA9IGdldEhvb2tzKHN0YXRlLnBsdWdpbnMsICdhZnRlckdldENvbmZpZycpXHJcbiAgICByZXR1cm4gcmVkdWNlSG9va3MoaG9va3MsIHsgc3luYzogdHJ1ZSB9KShzdGF0ZSlcclxuICB9LFxyXG4gIGJlZm9yZVByZXBhcmVCcm93c2VyUGx1Z2luczogc3RhdGUgPT4ge1xyXG4gICAgY29uc3QgaG9va3MgPSBnZXRIb29rcyhzdGF0ZS5wbHVnaW5zLCAnYmVmb3JlUHJlcGFyZUJyb3dzZXJQbHVnaW5zJylcclxuICAgIHJldHVybiByZWR1Y2VIb29rcyhob29rcykoc3RhdGUpXHJcbiAgfSxcclxuICBhZnRlclByZXBhcmVCcm93c2VyUGx1Z2luczogc3RhdGUgPT4ge1xyXG4gICAgY29uc3QgaG9va3MgPSBnZXRIb29rcyhzdGF0ZS5wbHVnaW5zLCAnYWZ0ZXJQcmVwYXJlQnJvd3NlclBsdWdpbnMnKVxyXG4gICAgcmV0dXJuIHJlZHVjZUhvb2tzKGhvb2tzKShzdGF0ZSlcclxuICB9LFxyXG4gIGJlZm9yZVByZXBhcmVSb3V0ZXM6IHN0YXRlID0+IHtcclxuICAgIGNvbnN0IGhvb2tzID0gZ2V0SG9va3Moc3RhdGUucGx1Z2lucywgJ2JlZm9yZVByZXBhcmVSb3V0ZXMnKVxyXG4gICAgcmV0dXJuIHJlZHVjZUhvb2tzKGhvb2tzKShzdGF0ZSlcclxuICB9LFxyXG4gIGdldFJvdXRlczogKHJvdXRlcywgc3RhdGUpID0+IHtcclxuICAgIGNvbnN0IGhvb2tzID0gZ2V0SG9va3Moc3RhdGUucGx1Z2lucywgJ2dldFJvdXRlcycpXHJcbiAgICByZXR1cm4gcmVkdWNlSG9va3MoaG9va3MpKHJvdXRlcywgc3RhdGUpXHJcbiAgfSxcclxuICBub3JtYWxpemVSb3V0ZTogc3RhdGUgPT4ge1xyXG4gICAgY29uc3QgaG9va3MgPSBnZXRIb29rcyhzdGF0ZS5wbHVnaW5zLCAnbm9ybWFsaXplUm91dGUnKVxyXG4gICAgcmV0dXJuIHJvdXRlID0+IHJlZHVjZUhvb2tzKGhvb2tzLCB7IHN5bmM6IHRydWUgfSkocm91dGUsIHN0YXRlKVxyXG4gIH0sXHJcbiAgYWZ0ZXJQcmVwYXJlUm91dGVzOiBzdGF0ZSA9PiB7XHJcbiAgICBjb25zdCBob29rcyA9IGdldEhvb2tzKHN0YXRlLnBsdWdpbnMsICdhZnRlclByZXBhcmVSb3V0ZXMnKVxyXG4gICAgcmV0dXJuIHJlZHVjZUhvb2tzKGhvb2tzKShzdGF0ZSlcclxuICB9LFxyXG4gIHdlYnBhY2s6IChjb25maWcsIHN0YXRlKSA9PiB7XHJcbiAgICBjb25zdCBob29rcyA9IGdldEhvb2tzKHN0YXRlLnBsdWdpbnMsICd3ZWJwYWNrJylcclxuICAgIHJldHVybiByZWR1Y2VIb29rcyhob29rcywgeyBzeW5jOiB0cnVlIH0pKGNvbmZpZywgc3RhdGUpXHJcbiAgfSxcclxuICBhZnRlckJ1bmRsZTogc3RhdGUgPT4ge1xyXG4gICAgY29uc3QgaG9va3MgPSBnZXRIb29rcyhzdGF0ZS5wbHVnaW5zLCAnYWZ0ZXJCdW5kbGUnKVxyXG4gICAgcmV0dXJuIHJlZHVjZUhvb2tzKGhvb2tzKShzdGF0ZSlcclxuICB9LFxyXG4gIGFmdGVyRGV2U2VydmVyU3RhcnQ6IHN0YXRlID0+IHtcclxuICAgIGNvbnN0IGhvb2tzID0gZ2V0SG9va3Moc3RhdGUucGx1Z2lucywgJ2FmdGVyRGV2U2VydmVyU3RhcnQnKVxyXG4gICAgcmV0dXJuIHJlZHVjZUhvb2tzKGhvb2tzKShzdGF0ZSlcclxuICB9LFxyXG4gIGJlZm9yZVJlbmRlclRvRWxlbWVudDogKENvbXAsIHN0YXRlKSA9PiB7XHJcbiAgICBjb25zdCBob29rcyA9IGdldEhvb2tzKHN0YXRlLnBsdWdpbnMsICdiZWZvcmVSZW5kZXJUb0VsZW1lbnQnKVxyXG4gICAgcmV0dXJuIHJlZHVjZUhvb2tzKGhvb2tzKShDb21wLCBzdGF0ZSlcclxuICB9LFxyXG4gIGJlZm9yZVJlbmRlclRvSHRtbDogKGVsZW1lbnQsIHN0YXRlKSA9PiB7XHJcbiAgICBjb25zdCBob29rcyA9IGdldEhvb2tzKHN0YXRlLnBsdWdpbnMsICdiZWZvcmVSZW5kZXJUb0h0bWwnKVxyXG4gICAgcmV0dXJuIHJlZHVjZUhvb2tzKGhvb2tzKShlbGVtZW50LCBzdGF0ZSlcclxuICB9LFxyXG4gIGh0bWxQcm9wczogKHByb3BzLCBzdGF0ZSkgPT4ge1xyXG4gICAgY29uc3QgaG9va3MgPSBnZXRIb29rcyhzdGF0ZS5wbHVnaW5zLCAnaHRtbFByb3BzJylcclxuICAgIHJldHVybiByZWR1Y2VIb29rcyhob29rcykocHJvcHMsIHN0YXRlKVxyXG4gIH0sXHJcbiAgaGVhZEVsZW1lbnRzOiAoZWxlbWVudHMsIHN0YXRlKSA9PiB7XHJcbiAgICBjb25zdCBob29rcyA9IGdldEhvb2tzKHN0YXRlLnBsdWdpbnMsICdoZWFkRWxlbWVudHMnKVxyXG4gICAgcmV0dXJuIHJlZHVjZUhvb2tzKGhvb2tzKShlbGVtZW50cywgc3RhdGUpXHJcbiAgfSxcclxuICBiZWZvcmVIdG1sVG9Eb2N1bWVudDogKGh0bWwsIHN0YXRlKSA9PiB7XHJcbiAgICBjb25zdCBob29rcyA9IGdldEhvb2tzKHN0YXRlLnBsdWdpbnMsICdiZWZvcmVIdG1sVG9Eb2N1bWVudCcpXHJcbiAgICByZXR1cm4gcmVkdWNlSG9va3MoaG9va3MpKGh0bWwsIHN0YXRlKVxyXG4gIH0sXHJcbiAgYmVmb3JlRG9jdW1lbnRUb0ZpbGU6IChodG1sLCBzdGF0ZSkgPT4ge1xyXG4gICAgY29uc3QgaG9va3MgPSBnZXRIb29rcyhzdGF0ZS5wbHVnaW5zLCAnYmVmb3JlRG9jdW1lbnRUb0ZpbGUnKVxyXG4gICAgcmV0dXJuIHJlZHVjZUhvb2tzKGhvb2tzKShodG1sLCBzdGF0ZSlcclxuICB9LFxyXG4gIGFmdGVyRXhwb3J0OiBzdGF0ZSA9PiB7XHJcbiAgICBjb25zdCBob29rcyA9IGdldEhvb2tzKHN0YXRlLnBsdWdpbnMsICdhZnRlckV4cG9ydCcpXHJcbiAgICByZXR1cm4gcmVkdWNlSG9va3MoaG9va3MpKHN0YXRlKVxyXG4gIH0sXHJcbiAgcGx1Z2luczogc3RhdGUgPT4ge1xyXG4gICAgY29uc3QgaG9va3MgPSBnZXRIb29rcyhzdGF0ZS5wbHVnaW5zLCAncGx1Z2lucycpXHJcbiAgICByZXR1cm4gcmVkdWNlSG9va3MoaG9va3MpKHN0YXRlKVxyXG4gIH0sXHJcbn1cclxuIl19